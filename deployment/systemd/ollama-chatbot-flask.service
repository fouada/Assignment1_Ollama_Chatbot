[Unit]
Description=Ollama Chatbot Flask REST API
Documentation=https://github.com/fouada/Assignment1_Ollama_Chatbot
After=network-online.target ollama.service
Wants=network-online.target
Requires=ollama.service

[Service]
Type=simple
User=ollama
Group=ollama
WorkingDirectory=/opt/ollama-chatbot
Environment="PATH=/opt/ollama-chatbot/.venv/bin:/usr/local/bin:/usr/bin:/bin"
Environment="PYTHONUNBUFFERED=1"
Environment="LOG_LEVEL=INFO"
Environment="FLASK_APP=apps/app_flask.py"
ExecStart=/opt/ollama-chatbot/.venv/bin/python /opt/ollama-chatbot/apps/app_flask.py
Restart=on-failure
RestartSec=10
StandardOutput=append:/opt/ollama-chatbot/logs/flask_app.log
StandardError=append:/opt/ollama-chatbot/logs/flask_app.log

# Security hardening
PrivateTmp=true
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/opt/ollama-chatbot/logs

[Install]
WantedBy=multi-user.target

